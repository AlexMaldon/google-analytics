all: test

# experimental autogenerated interface documentation
docopts := --include members.documented --markdown 5
.PHONY: docs
docs:
	rm -r docs/build; mkdir docs/build
	cp docs/interface.md docs/build/interface.md
	inspect googleanalytics/auth/__init__.py $(docopts) >> docs/build/interface.md
	inspect googleanalytics/account.py $(docopts) >> docs/build/interface.md
	inspect googleanalytics/query.py $(docopts) >> docs/build/interface.md
	cp docs/build/interface.md docs/google-analytics.wiki/Interface.md
	pandoc -o README.rst README.md

test:
	python setup.py test

wiki: docs
	cd docs/google-analytics.wiki && git add . --all && \
	git commit --message "Update autogenerated interface documentation." && \
	git push

package: docs
	python setup.py sdist upload
